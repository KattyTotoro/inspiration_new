import{f as x,p as B,u as F,l as N,r as S,c as r,j as T,h as s,F as V,a as o,t as k,n as j,o as i}from"./BHoSufKp.js";const q={class:"content"},H={key:0,class:"postPage"},L=["innerHTML"],M={key:1},U=x({__name:"[id]",async setup(O){var p;let a,u;const v=B(),l=F(),C=+v.params.id,{data:b}=([a,u]=N(()=>j(`/api/post/${C}`,"$OCGVq9QZqC")),a=await a,u(),a),t=S((p=b.value)==null?void 0:p.post);async function g(){var e,n;await(await fetch("/api/post/moderate/"+((e=t.value)==null?void 0:e.id),{method:"PUT",body:JSON.stringify({token:(n=l.user)==null?void 0:n.token})})).json()}return(w,e)=>{var n,c,d,_,m,h,f,y;return i(),r("section",q,[((n=s(l).user)==null?void 0:n.role)=="moderator"?(i(),r(V,{key:0},[s(t)?(i(),r("div",H,[o("p",null,k((d=(c=s(t))==null?void 0:c.author)!=null&&d.pseudo?(m=(_=s(t))==null?void 0:_.author)==null?void 0:m.pseudo:(h=s(t))==null?void 0:h.author.name),1),o("h1",null,k((f=s(t))==null?void 0:f.title),1),e[0]||(e[0]=o("br",null,null,-1)),o("div",{innerHTML:(y=s(t))==null?void 0:y.text},null,8,L),e[1]||(e[1]=o("div",{style:{clear:"both"}},null,-1)),o("button",{class:"approveButton",onClick:g},"Одобрить")])):(i(),r("div",M,"Что-то пошло не так..."))],64)):T("",!0)])}}});export{U as default};
